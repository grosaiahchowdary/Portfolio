<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rosaiah Chowdary — Data Engineer</title>
  <meta name="author" content="Rosaiah Chowdary">
  <meta name="description" content="Portfolio — Data Engineer & ETL Specialist">

  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    /* --------- Variables & Reset --------- */
    :root{
      --bg-dark: #071226;
      --glass: rgba(255,255,255,0.04);
      --muted:#9aa6b2;
      --accent:#39b6ff;
      --accent-2:#60e2c6;
      --card:#0b1220;
      --radius:14px;
      color-scheme: dark;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg-dark);color:#e6eef6;font-smoothing:antialiased}

    /* Fullscreen background canvases: waves + particles */
    .bg-wrap{position:fixed;inset:0;z-index:-2;overflow:hidden}
    canvas.bg-canvas{position:absolute;inset:0;width:100%;height:100%;display:block}

    /* subtle grain overlay */
    .grain{position:fixed;inset:0;pointer-events:none;mix-blend-mode:overlay;opacity:0.06;z-index:-1;background-image:radial-gradient(rgba(255,255,255,0.02) 0.5px, transparent 0.6px);background-size:3px 3px}

    /* --------- Page container --------- */
    .site{max-width:1100px;margin:0 auto;position:relative;padding:28px}

    /* --------- Header --------- */
    header.site-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#021025;font-weight:800;letter-spacing:0.6px}
    .brand h1{font-size:18px;margin:0;color:#eaf6ff}
    .brand p{margin:0;font-size:13px;color:var(--muted)}
    .header-actions{display:flex;gap:10px;align-items:center}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:700;color:#eaf6ff;backdrop-filter:blur(6px)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04)}

    /* --------- Hero / Profile --------- */
    .hero{display:grid;grid-template-columns:260px 1fr;gap:22px;margin-top:20px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 40px rgba(2,6,23,0.6)}

    .photo{width:220px;height:220px;border-radius:14px;object-fit:cover;display:block;border:4px solid rgba(255,255,255,0.04)}
    .profile-left{display:flex;flex-direction:column;gap:12px;align-items:center}
    .name{font-size:20px;font-weight:800;color:#fbfdff}
    .title{color:var(--accent);font-weight:700}
    .meta{color:var(--muted);font-size:13px}

    .profile-right{display:flex;flex-direction:column;gap:10px}
    .intro{font-size:15px;color:#dfefff;line-height:1.6}
    .cta-row{display:flex;gap:10px;margin-top:6px}

    /* --------- Tabs & panels --------- */
    .tabs{display:flex;gap:8px;margin-top:18px}
    .tab{padding:10px 14px;border-radius:12px;border:1px solid transparent;background:transparent;cursor:pointer;font-weight:700;color:#dbefff}
    .tab.active{background:linear-gradient(180deg, rgba(57,182,255,0.08), rgba(96,226,198,0.03));border-color:rgba(57,182,255,0.12);color:var(--accent)}

    .panels{margin-top:14px}
    .panel{display:none}
    .panel.active{display:block}

    /* --------- Tiles / Grid --------- */
    .tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;}
    .tiles .tile{position:relative;perspective:1400px;background:var(--card);border-radius:18px;padding:0;overflow:visible;min-height:240px;border:1px solid rgba(255,255,255,0.12);box-shadow:0 0 25px rgba(0,0,0,0.4);backdrop-filter:blur(8px);}
    .tiles .tile .tile-inner{position:relative;transform-style:preserve-3d;transition:transform 1.6s cubic-bezier(.2,.8,.2,1);height:100%;}
    .tiles .tile .tile-face{position:absolute;inset:0;padding:22px;backface-visibility:hidden;border-radius:18px;display:flex;flex-direction:column;justify-content:center;border:1px solid rgba(255,255,255,0.1);}
    .tiles .tile .tile-face.front{transform:rotateY(0deg);}
    .tiles .tile .tile-face.back{transform:rotateY(180deg);}    
    .tiles .tile .tile-title{font-weight:700;margin-bottom:8px;color:#eaf6ff}
    .tiles .tile .tile-body{color:var(--muted);font-size:14px}
    .tiles .tile .tile-inner.flipped{transform:rotateY(180deg)}

    /* hover / focus: flip on pointer hover or keyboard focus */
    .tiles .tile:hover .tile-inner, .tiles .tile:focus-within .tile-inner{transform:rotateY(180deg) translateY(-6px)}

    /* Timer bomb styles */
    #email-timer .bomb{width:72px;height:72px;border-radius:999px;background:linear-gradient(180deg,#332a3a,#1b1220);display:grid;place-items:center;position:relative;border:1px solid rgba(255,255,255,0.06);box-shadow:0 6px 18px rgba(0,0,0,0.5);}
    #email-timer .bomb-core{font-size:28px;}
    #email-timer .fuse{position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:2px;height:18px;background:linear-gradient(90deg,#ffcf6b,#ff6b6b);border-radius:2px;box-shadow:0 0 8px rgba(255,110,110,0.9);animation:burn 1s linear infinite}
    @keyframes burn{0%{height:18px;opacity:1}50%{height:10px;opacity:0.6}100%{height:18px;opacity:1}}

    footer{margin-top:34px;text-align:center;color:var(--muted);font-size:13px}

    @media (max-width:900px){
      .hero{grid-template-columns:1fr}
      .photo{width:160px;height:160px}
      .tiles .tile{min-height:200px}
    }
  </style>
</head>
<body>
  <!-- Background canvases container (waves + particles) -->
  <div class="bg-wrap" aria-hidden="true">
    <canvas id="waves-canvas" class="bg-canvas"></canvas>
    <canvas id="particles-canvas" class="bg-canvas"></canvas>
    <div class="grain"></div>
  </div>

  <div class="site">
    <header class="site-header">
      <div class="brand">
        <div class="logo">RC</div>
        <div>
          <h1>Rosaiah Chowdary</h1>
          <p class="meta">Data Engineer • ETL Specialist — Hyderabad, India</p>
        </div>
      </div>

      <div class="header-actions">
        <button class="btn" id="downloadResume"><i class="fa-regular fa-file-lines"></i>&nbsp;Download Resume</button>
        <button class="btn secondary" id="themeToggle" aria-pressed="false" title="Toggle theme"><i class="fa-solid fa-sun"></i></button>
      </div>
    </header>

    <main>
      <!-- rest of your original HTML content preserved (hero, panels, tiles, projects etc.) -->

      <section class="hero">
        <aside class="card profile-left">
          <img src="1000099595.jpeg" alt="Rosaiah" class="photo">
          <div class="name">Rosaiah Chowdary</div>
          <div class="title">Data Engineer & ETL Specialist</div>
          <div class="meta">IBM DataStage • Python • SQL • Kafka • Cloud (AWS/GCP)</div>
          <div style="display:flex;gap:8px;margin-top:8px;flex-direction:column;align-items:center">
            <div style="display:flex;gap:8px">
              <a class="btn" href="mailto:gummalla.ds@gmail.com"><i class="fa-regular fa-envelope"></i>&nbsp;Email</a>
              <a class="btn secondary" href="https://linkedin.com/in/gummallarosaiahchowdary" target="_blank"><i class="fa-brands fa-linkedin"></i>&nbsp;LinkedIn</a>
            </div>
            <!-- Timer-bomb style current time widget below the email button -->
            <div id="email-clock" style="margin-top:72px;display:inline-flex;align-items:center;gap:12px;white-space:nowrap">
            <canvas id="analog-clock" width="96" height="96" aria-label="Analog clock" role="img" style="width:96px;height:96px;border-radius:50%;border:1px solid rgba(255,255,255,0.06);box-shadow:0 8px 28px rgba(2,10,30,0.6);background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.02), transparent 40%);"></canvas>
            <div id="clock-text" style="font-size:13px;color:var(--muted);min-width:80px;text
              <div style="font-size:13px;color:var(--muted)" id="current-time">--:--:--</div>
            </div>
          </div>
        </aside>

        <section class="card profile-right">
          <div class="card" style="margin-bottom:14px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));padding:14px;border-radius:12px">
            <h2 style="margin:0 0 8px 0">About Me</h2>
            <p class="intro">I am a passionate Data Engineer and ETL DataStage consultant with extensive hands-on experience in designing, developing, and optimizing data integration solutions. Over my career, I have worked on projects spanning performance tuning, operational support and migrations.</p>
            <ul style="color:var(--muted);margin-top:8px">
              <li>Expertise: IBM DataStage, performance tuning, troubleshooting, and admin</li>
              <li>Delivered end-to-end data warehousing and migration projects</li>
              <li>Integrated data from relational DBs, files, and cloud</li>
              <li>Problem-solving focus: data quality, governance, automation</li>
              <li>Modernized legacy ETL & migration to cloud</li>
            </ul>
          </div>

          <nav class="tabs" role="tablist" aria-label="Profile sections" style="margin-bottom:12px">
            <button role="tab" class="tab-btn tab active" id="tab-about" aria-controls="panel-about" aria-selected="true">About Me</button>
            <button role="tab" class="tab-btn" id="tab-roles" aria-controls="panel-roles" aria-selected="false">Roles</button>
            <button role="tab" class="tab-btn" id="tab-skills" aria-controls="panel-skills" aria-selected="false">Skills</button>
            <button role="tab" class="tab-btn" id="tab-projects" aria-controls="panel-projects" aria-selected="false">Selected Projects</button>
          </nav>

          <section class="panels">
            <article id="panel-about" class="panel active" role="tabpanel" aria-labelledby="tab-about">
              <div class="card" style="padding:14px">
                <h3 style="margin-top:0">Summary</h3>
                <p style="color:var(--muted)">Experienced in operational support, job development, migrations and building observable pipelines. I prefer automation-first approaches and clear runbooks to reduce toil.</p>
              </div>
            </article>

            <article id="panel-roles" class="panel" role="tabpanel" aria-labelledby="tab-roles" hidden>
              <div class="card" style="padding:14px">
                <h3 style="margin-top:0">Roles &amp; Responsibilities</h3>
                <div class="tiles" style="margin-top:10px">

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Production Support &amp; Operations</div>
                    <div class="tile-body">Managed over 90,000 automated and scheduled jobs, ensuring smooth operations, minimal downtime and meeting strict SLAs. Monitored batch windows, handled failovers, and coordinated cross-team incident responses.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Issue Resolution &amp; RCA</div>
                    <div class="tile-body">Conducted in-depth root cause analysis and quickly resolved critical incidents and change requests to maintain business continuity. Authored RCA reports and implemented preventive actions.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">DataStage Job Development</div>
                    <div class="tile-body">Designed robust, high-performing ETL jobs per mapping documents and business requirements, ensuring quality, parallelism and efficient resource usage.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Data Extraction &amp; Integration</div>
                    <div class="tile-body">Orchestrated data flows from various sources (databases, Excel, CSV, flat files), ensuring data accuracy throughout integration and implementing transformations reliably.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Documentation &amp; Knowledge Management</div>
                    <div class="tile-body">Developed technical specifications, transformation/logic documentation, and runbooks for efficient knowledge transfer and swift onboarding of new team members.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Testing &amp; Quality Assurance</div>
                    <div class="tile-body">Defined and executed comprehensive system, integration, and UAT test plans to ensure data and process quality, including performance benchmarking and regression testing.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Client &amp; Stakeholder Engagement</div>
                    <div class="tile-body">Managed client incidents, led regular status reviews, initiated automation projects, and ensured stakeholder satisfaction through clear communication and on-time delivery.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Deployment &amp; Change Management</div>
                    <div class="tile-body">Coordinated code migrations, job scheduling, and production cutover in collaboration with cross-functional teams, maintaining rollback plans and validation checks.</div>
                  </div>

                </div>
              </div>
            </article>

            <article id="panel-skills" class="panel" role="tabpanel" aria-labelledby="tab-skills" hidden>
              <div class="card" style="padding:14px">
                <h3 style="margin-top:0">Skills</h3>
                <div class="tiles" style="margin-top:10px">

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">ETL Development &amp; Support</div>
                    <div class="tile-body">Designing, building, and managing Extract, Transform, Load (ETL) processes for reliable movement of data across systems. Ensuring high-quality and timely data delivery with minimal errors.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">IBM DataStage</div>
                    <div class="tile-body">Advanced skill in IBM DataStage, including scalable ETL job design, parallel processing, job tuning, troubleshooting, and ongoing operational support for data integration.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">SQL &amp; PL/SQL</div>
                    <div class="tile-body">Writing and optimizing queries, stored procedures, and data transformation scripts for secure, high-performance and accurate data processing in relational databases.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Python for Data Engineering</div>
                    <div class="tile-body">Automating data workflows, custom ETL scripting, and integrating Python into broader data engineering projects to improve speed and flexibility.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Data Warehousing</div>
                    <div class="tile-body">Designing robust data models, developing data warehouses and data marts for business analytics, and supporting large-scale analytical workloads.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Apache Kafka &amp; Messaging</div>
                    <div class="tile-body">Integrating real-time data streams with Apache Kafka and message queues, enabling event-driven architectures and near-real-time processing.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Cloud Platforms (AWS, GCP)</div>
                    <div class="tile-body">Migrating on-premise data solutions to the cloud, leveraging AWS and GCP managed services for ETL, data storage, automation, and scalability.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">CI/CD &amp; DevOps</div>
                    <div class="tile-body">Managing source code, automating deployments and streamlining development pipelines with Git, Jenkins, and related DevOps tooling.</div>
                  </div>

                </div>
              </div>
            </article>

            <article id="panel-projects" class="panel" role="tabpanel" aria-labelledby="tab-projects" hidden>
              <div class="card" style="padding:14px">
                <h3 style="margin-top:0">Selected Projects</h3>
                <div class="tiles" style="margin-top:10px">

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Data Warehouse Migration</div>
                    <div class="tile-body">Led migration of on-prem ETL to cloud-native pipelines, improving load times by 4x and cutting infra costs by 35%. Designed resilient data flows and optimised batch runtimes, created transformation specs and executed phased cutovers.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Real-time Stream Integration</div>
                    <div class="tile-body">Implemented Kafka-based streaming pipelines enabling near-real-time analytics, alerts and event-driven processing. Built idempotent consumers, schema evolution strategies, and monitoring dashboards for throughput and lag.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Operational Automation</div>
                    <div class="tile-body">Automated daily maintenance, log cleanup, job restart checks and validation workflows — reducing manual intervention by 70% and improving SLA stability. Integrated alerting and auto-remediation scripts for common failure classes.</div>
                  </div>

                  <div class="tile" tabindex="0" aria-expanded="false">
                    <div class="tile-title">Data Quality &amp; Observability</div>
                    <div class="tile-body">Designed and implemented data quality checks, drift detection, and lineage mapping. Built observability into pipelines using metrics, logs and dashboards to reduce silent failures and accelerate troubleshooting.</div>
                  </div>

                </div>
              </div>
            </article>
          </section>
        </section>
      </section>

      
    </main>

    <footer>
      <small>© Rosaiah Chowdary — Data Engineering & ETL Specialist</small>
    </footer>
  </div>

  <script>
    // Tabs and tiles behaviour (enhanced) + hover flip
    (function(){
      const tabs = Array.from(document.querySelectorAll('.tab-btn'));
      const panels = tabs.map(t => document.getElementById(t.getAttribute('aria-controls')));

      // add CSS for panel animation & tab subtle motion and hover flip
      const animStyle = document.createElement('style');
      animStyle.innerHTML = `
        .tab-btn{transition:transform .26s cubic-bezier(.2,.9,.2,1), background .26s, color .18s}
        .tab-btn:active{transform:translateY(1px)}
        .panel{opacity:0;transform:translateY(6px);transition:opacity .36s ease, transform .36s ease}
        .panel.active{opacity:1;transform:translateY(0)}

        /* larger tiles and hover flip */
        .tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;}
        .tiles .tile{position:relative;perspective:1200px;background:var(--card);border-radius:12px;padding:0;overflow:visible;border:1px solid rgba(255,255,255,0.04);min-height:220px}
        .tiles .tile .tile-inner{position:relative;transform-style:preserve-3d;transition:transform .55s cubic-bezier(.2,.9,.2,1);height:100%}
        .tiles .tile .tile-face{position:absolute;inset:0;padding:20px;backface-visibility:hidden;border-radius:12px;display:flex;flex-direction:column;justify-content:center}
        .tiles .tile .tile-face.front{transform:rotateY(0deg);}
        .tiles .tile .tile-face.back{transform:rotateY(180deg);}    
        .tiles .tile .tile-title{font-weight:700;margin-bottom:8px;color:#eaf6ff}
        .tiles .tile .tile-body{color:var(--muted);font-size:14px}
        .tiles .tile .tile-inner.flipped{transform:rotateY(180deg)}

        /* hover / focus: flip on pointer hover or keyboard focus */
        .tiles .tile:hover .tile-inner, .tiles .tile:focus-within .tile-inner{transform:rotateY(180deg) translateY(-6px)}
      `;
      document.head.appendChild(animStyle);

      function activateTab(index){
        tabs.forEach((t,i)=>{
          const selected = i === index;
          t.classList.toggle('active', selected);
          t.setAttribute('aria-selected', selected ? 'true' : 'false');
          panels[i].classList.toggle('active', selected);
          panels[i].hidden = !selected;
        });
      }

      if(tabs.length) tabs.forEach((t, i) => { t.addEventListener('click', ()=> activateTab(i)); t.addEventListener('keydown', (e)=>{ if(e.key === 'ArrowRight') activateTab((i+1)%tabs.length); if(e.key === 'ArrowLeft') activateTab((i-1+tabs.length)%tabs.length); }); });
      activateTab(0);

      // Flip tiles initialization: wrap content if needed, attach keyboard toggle but rely on hover for mouse
      document.querySelectorAll('.tiles .tile').forEach(tile => {
        // if inner not present, wrap existing content
        if(!tile.querySelector('.tile-inner')){
          const title = tile.querySelector('.tile-title')?.innerHTML || tile.querySelector('h3')?.innerHTML || '';
          const body = tile.querySelector('.tile-body')?.innerHTML || '';
          tile.innerHTML = `
            <div class="tile-inner" role="button" tabindex="0" aria-pressed="false">
              <div class="tile-face front">
                <div class="tile-title">${title}</div>
                <div style="color:var(--muted);font-size:13px">Hover to view</div>
              </div>
              <div class="tile-face back">
                <div class="tile-title">${title}</div>
                <div class="tile-body">${body}</div>
              </div>
            </div>
          `;
        }

        const inner = tile.querySelector('.tile-inner');
        // ensure faces exist
        if(!inner || !inner.querySelector('.tile-face.front') || !inner.querySelector('.tile-face.back')) return;

        // accessibility
        tile.setAttribute('role','group');
        tile.setAttribute('aria-expanded', 'false');

        // keyboard: toggle flip on Enter/Space for keyboard users
        if(!inner.__hoverInit){
          inner.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); inner.classList.toggle('flipped'); const flipped = inner.classList.contains('flipped'); inner.setAttribute('aria-pressed', flipped ? 'true' : 'false'); tile.setAttribute('aria-expanded', flipped ? 'true' : 'false'); } });
          inner.__hoverInit = true;
        }
      });

    })();

    // Theme toggle (kept simple)
    const themeBtn = document.getElementById('themeToggle');
    themeBtn.addEventListener('click', () => {
      const light = document.documentElement.getAttribute('data-theme') === 'light';
      if(light){
        document.documentElement.removeAttribute('data-theme');
      } else {
        document.documentElement.setAttribute('data-theme','light');
      }
    });

    // Resume download (kept)
    document.getElementById('downloadResume').addEventListener('click', ()=>{
      const data = { name: 'Rosaiah Chowdary', title: 'Data Engineer & ETL Specialist', email: 'gummalla.ds@gmail.com' };
      const win = window.open('', '_blank');
      win.document.write(`<html><head><title>${data.name} — Resume</title></head><body style="font-family:Inter,Arial;padding:32px"><h1>${data.name}</h1><h3>${data.title}</h3><p>Email: ${data.email}</p><hr><p>Resume generated from portfolio — replace with your real PDF.</p>  <script>
    // Timer + blast logic: update time every second, trigger a 3s blast on minute or on click
    (function(){
      const el = document.getElementById('current-time');
      const bomb = document.querySelector('#email-timer .bomb');
      const fuse = document.getElementById('fuse');
      let blasting = false;
      function pad(n){ return n<10? '0'+n : ''+n }
      function triggerBlast(){
        if(!bomb || blasting) return;
        blasting = true;
        bomb.classList.add('blast');
        const ring = document.createElement('span'); ring.className = 'blast-ring'; bomb.appendChild(ring);
        if(fuse) fuse.style.animationDuration = '0.28s';
        setTimeout(()=>{ if(fuse) fuse.style.animationDuration = '1s'; bomb.classList.remove('blast'); ring.remove(); blasting=false; }, 3000);
      }
      function update(){
        const now = new Date();
        el.textContent = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
        if(fuse) fuse.style.animationDuration = (1 + (now.getSeconds()%4)*0.25) + 's';
        if(now.getSeconds() === 0){ triggerBlast(); }
      }
      if(bomb) bomb.addEventListener('click', triggerBlast);
      update();
      setInterval(update, 1000);
    })();
  </script>
</body></html>`);
      win.document.close();
    });

    /* ======== Background: Waves + Particles ======== (kept intact)
       Two canvas layers: waves-canvas draws sin-based flowing gradient ribbons (option 1) and
       particles-canvas draws glowing particles with soft trails (option 3). Designed to be
       performant: uses offscreen buffers and adapts to DPR. No external libs.
    */
    (function(){
      // utilities
      const dpr = Math.max(1, window.devicePixelRatio || 1);

      // --- Waves canvas ---
      const wavesCanvas = document.getElementById('waves-canvas');
      const wctx = wavesCanvas.getContext('2d');

      function resizeCanvasSize(canvas){
        canvas.width = Math.floor(window.innerWidth * dpr);
        canvas.height = Math.floor(window.innerHeight * dpr);
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
      }
      resizeCanvasSize(wavesCanvas);

      // wave layers configuration
      const ribbons = [
        { amplitude: 120, wavelength: 0.0095, speed: 0.0009, hueStart: 190, hueEnd: 210, alpha:0.18, yOff: 0.55 },
        { amplitude: 80, wavelength: 0.012, speed: 0.0012, hueStart: 170, hueEnd: 200, alpha:0.12, yOff: 0.7 },
        { amplitude: 50, wavelength: 0.016, speed: 0.0017, hueStart: 200, hueEnd: 250, alpha:0.08, yOff: 0.35 }
      ];

      let startTime = performance.now();

      function drawWaves(time){
        const t = time - startTime;
        const width = wavesCanvas.width;
        const height = wavesCanvas.height;

        // clear with subtle gradient
        wctx.clearRect(0,0,width,height);

        // base overlay to darken edges
        const baseGrad = wctx.createLinearGradient(0,0,0,height);
        baseGrad.addColorStop(0, 'rgba(2,10,20,0.6)');
        baseGrad.addColorStop(1, 'rgba(4,8,16,0.8)');
        wctx.fillStyle = baseGrad; wctx.fillRect(0,0,width,height);

        ribbons.forEach((r, idx) => {
          const yCenter = height * r.yOff;
          const amplitude = r.amplitude * dpr;
          const wavelength = r.wavelength * width;
          const offset = t * r.speed * width;

          // create path for ribbon
          wctx.beginPath();
          const step = Math.max(6, Math.floor(width/120));
          for(let x=0;x<=width;x+=step){
            const theta = (x + offset) * (2*Math.PI / wavelength);
            const y = yCenter + Math.sin(theta) * amplitude * Math.cos(theta*0.25);
            if(x===0) wctx.moveTo(x, y); else wctx.lineTo(x, y);
          }

          // close path down to bottom to create ribbon area
          wctx.lineTo(width, height);
          wctx.lineTo(0, height);
          wctx.closePath();

          // gradient fill with hue lerp
          const hue = r.hueStart + ( (Math.sin(t*0.0005 + idx) +1)/2 ) * (r.hueEnd - r.hueStart);
          const grad = wctx.createLinearGradient(0, yCenter - amplitude, 0, yCenter + amplitude*2);
          grad.addColorStop(0, `hsla(${hue}, 88%, 60%, ${r.alpha})`);
          grad.addColorStop(1, `hsla(${hue+30}, 80%, 45%, ${r.alpha*0.3})`);

          wctx.fillStyle = grad;

          // soft blur effect: draw to temporary canvas (cheap approximation by globalAlpha layers)
          wctx.save();
          wctx.globalCompositeOperation = 'lighter';
          wctx.fill();
          wctx.restore();
        });

        // subtle vignette
        wctx.fillStyle = 'rgba(0,0,0,0.15)';
        wctx.fillRect(0,0,width, height*0.06);
        wctx.fillRect(0,height*0.94,width, height*0.06);
      }

      // --- Particles canvas ---
      const particlesCanvas = document.getElementById('particles-canvas');
      const pctx = particlesCanvas.getContext('2d');
      resizeCanvasSize(particlesCanvas);

      const particles = [];
      const particleCountBase = Math.round((window.innerWidth * window.innerHeight) / (1400*800) * 80);
      const MAX_PARTICLES = Math.max(40, particleCountBase);

      function rand(min,max){ return Math.random()*(max-min)+min }

      function initParticles(){
        particles.length = 0;
        for(let i=0;i<MAX_PARTICLES;i++){
          particles.push({
            x: Math.random()*particlesCanvas.width,
            y: Math.random()*particlesCanvas.height,
            vx: rand(-0.2,0.2)*dpr,
            vy: rand(-0.15,0.15)*dpr,
            size: rand(0.8,2.4)*dpr,
            life: rand(80,360),
            hue: rand(170,220),
            alpha: rand(0.08,0.22)
          });
        }
      }
      initParticles();

      // trail buffer to create glow trails (draw previous frame with alpha)
      function drawParticles(){
        const w = particlesCanvas.width, h = particlesCanvas.height;
        // fade previous frame slightly to create trails
        pctx.fillStyle = 'rgba(2,6,18,0.18)';
        pctx.fillRect(0,0,w,h);

        particles.forEach(p => {
          // motion influenced by sin waves for organic flow
          const time = performance.now()*0.0006;
          const flowX = Math.sin((p.y*0.002)+time*1.6) * 0.25;
          const flowY = Math.cos((p.x*0.002)+time*1.2) * 0.25;

          p.x += p.vx + flowX*dpr;
          p.y += p.vy + flowY*dpr;

          // wrap around
          if(p.x < -20*dpr) p.x = w + 20*dpr;
          if(p.x > w + 20*dpr) p.x = -20*dpr;
          if(p.y < -20*dpr) p.y = h + 20*dpr;
          if(p.y > h + 20*dpr) p.y = -20*dpr;

          // draw glow (radial gradient)
          const grd = pctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.size*12);
          grd.addColorStop(0, `hsla(${p.hue}, 95%, 65%, ${p.alpha})`);
          grd.addColorStop(0.3, `hsla(${p.hue+30}, 90%, 55%, ${p.alpha*0.35})`);
          grd.addColorStop(1, `rgba(2,6,18,0)`);

          pctx.globalCompositeOperation = 'lighter';
          pctx.fillStyle = grd;
          pctx.beginPath();
          pctx.arc(p.x, p.y, p.size*12, 0, Math.PI*2);
          pctx.fill();

          // tiny core
          pctx.globalCompositeOperation = 'source-over';
          pctx.fillStyle = `hsla(${p.hue}, 90%, 70%, ${Math.min(1,p.alpha*3)})`;
          pctx.beginPath();
          pctx.arc(p.x, p.y, p.size*1.2, 0, Math.PI*2);
          pctx.fill();
        });
      }

      // adapt on resize
      window.addEventListener('resize', ()=>{
        resizeCanvasSize(wavesCanvas); resizeCanvasSize(particlesCanvas);
        // re-init particles for new density
        initParticles();
      });

      // main loop
      let rafId;
      function loop(time){
        drawWaves(time);
        drawParticles();
        rafId = requestAnimationFrame(loop);
      }
      rafId = requestAnimationFrame(loop);

      // pause animation when page not visible to save CPU
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden){ cancelAnimationFrame(rafId); } else { startTime = performance.now(); rafId = requestAnimationFrame(loop); }
      });

    })();

  </script>
</body>
</html>
